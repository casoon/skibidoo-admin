---
interface Props {
  id: string;
  title: string;
  message: string;
  confirmText?: string;
  cancelText?: string;
  confirmAction?: string;
  variant?: "danger" | "warning" | "info";
}

const { 
  id, 
  title, 
  message, 
  confirmText = "Bestaetigen", 
  cancelText = "Abbrechen",
  confirmAction,
  variant = "danger"
} = Astro.props;

const variantClasses = {
  danger: "bg-red-600 hover:bg-red-700",
  warning: "bg-yellow-600 hover:bg-yellow-700",
  info: "bg-blue-600 hover:bg-blue-700"
};
---

<div 
  id={id}
  class="fixed inset-0 z-50 flex items-center justify-center"
  x-data="{ open: true }"
  x-show="open"
  x-cloak
>
  <!-- Backdrop -->
  <div 
    class="absolute inset-0 bg-black/50"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click="open = false; htmx.remove(document.getElementById('{id}'))"
  ></div>
  
  <!-- Modal -->
  <div 
    class="relative w-full max-w-md rounded-lg bg-white p-6 shadow-xl"
    x-show="open"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 scale-95"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
  >
    <h3 class="text-lg font-semibold text-gray-900">{title}</h3>
    <p class="mt-2 text-gray-600">{message}</p>
    
    <div class="mt-6 flex justify-end gap-3">
      <button 
        class="rounded-lg border px-4 py-2 text-gray-700 hover:bg-gray-50"
        @click="open = false; htmx.remove(document.getElementById('{id}'))"
      >
        {cancelText}
      </button>
      {confirmAction ? (
        <button 
          class={`rounded-lg px-4 py-2 text-white ${variantClasses[variant]}`}
          hx-post={confirmAction}
          hx-target={`#${id}`}
          hx-swap="delete"
        >
          {confirmText}
        </button>
      ) : (
        <button 
          class={`rounded-lg px-4 py-2 text-white ${variantClasses[variant]}`}
          @click="open = false; $dispatch('confirmed'); htmx.remove(document.getElementById('{id}'))"
        >
          {confirmText}
        </button>
      )}
    </div>
  </div>
</div>
